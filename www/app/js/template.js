define(["esri/urlUtils","dojo/Deferred","dojo/promise/all","esri/arcgis/utils","dojo/_base/array","res/Resources"],function(e,o,t,a,n,r){"use strict";var i=function(e){return""!==e&&void 0!==e&&2===e.split(";").length},l=function(e){var o=e.split(";");return{label:o[0],id:"$"+o[1].replace(/ /g,"")}};return{getApplicationInformation:function(){var t=new o,s=e.urlToObject(location.href),p=s&&s.query&&s.query.appid;return p?(a.getItem(p).then(function(e){var o,a,s,p={},u=e.itemData&&e.itemData.values;if(u){p.country=u.country,p.appLanguages={},u.defaultLanguage||(u.defaultLanguage=r.defaultLanguage||"en"),p.defaultLanguage=u.defaultLanguage,a=r.appLanguages&&r.appLanguages[u.defaultLanguage],p.appLanguages[u.defaultLanguage]={title:u.defaultTitle||a&&a.title||"",flagTitle:u.flagTitle||a&&a.flagTitle||"","default":!0},p.useAdditionalLanguage=u.useAdditionalLanguage,p.useAdditionalLanguage&&(s=u.secondLanguage||"fr",o=r.appLanguages&&r.appLanguages[s],p.appLanguages[s]={title:u.secondLanguageTitle||o&&o.title||"",flagTitle:u.secondLanguageFlagTitle||o&&o.flagTitle||""}),p.layersToHide=u.layersToHide?u.layersToHide.split(",").map(function(e){return parseInt(e)}):[],p.maskMapUrl=u.maskMapUrl,p.webMapID=u.webmap,p.countryFlagRight=void 0!==u.countryFlagRight?u.countryFlagRight+"px":void 0,p.countryTextWidth=void 0!==u.countryTextWidth?u.countryTextWidth+"px":u.countryFlagRight?u.countryFlagRight-20+"px":void 0,p.flagPath=u.flagPath,p.flagLinkPath=u.flagLinkPath,p.pdfURL=u.pdfURL,p.aboutLinkUrl=u.aboutLinkUrl,p.downloadDataUrl=u.downloadDataUrl,p.printURL=u.printURL,p.activeFiresIncluded=void 0===u.activeFiresIncluded?!0:u.activeFiresIncluded,p.landCoverIncluded=void 0===u.landCoverIncluded?!0:u.landCoverIncluded,p.biomassIncluded=void 0===u.biomassIncluded?!0:u.biomassIncluded,p.iflIncluded=void 0===u.iflIncluded?!0:u.iflIncluded,p.excludeDocumentsTab=u.excludeDocumentsTab,p.documentDirectory=u.documentDirectory,p.documentMapserver=u.documentMapserver,p.restorationModule=u.restorationModule||!1,p.restorationImageServer=u.restorationImageServer,u.slopeOptionNames&&u.slopeColors?(p.slopeOptionNames=[{label:"No Data",value:0}],p.slopeColors=["#000"],p.slopeOptionNames.concat(u.slopeOptionNames.split(";").map(function(e,o){return{label:e,value:o+1}})),p.slopeColors.concat(u.slopeColors.split(";"))):(p.slopeOptionNames=r.slopeOptionNames,p.slopeColors=r.slopeColors),u.treeCoverNames&&u.treeCoverColors?(p.treeCoverOptionNames=[{label:"No Data",value:0}],p.treeCoverColors=["#000"],p.treeCoverOptionNames.concat(u.treeCoverOptionNames.split(";").map(function(e,o){return{label:e,value:o+1}})),p.treeCoverColors.concat(u.treeCoverColors.split(";"))):(p.treeCoverOptionNames=r.treeCoverOptionNames,p.treeCoverColors=r.treeCoverColors),i(u.restorationModuleOption1)?(p.restorationModuleOptions=[],p.restorationModuleOptions.push(l(u.restorationModuleOption1)),i(u.restorationModuleOption2)&&p.restorationModuleOptions.push(l(u.restorationModuleOption2)),i(u.restorationModuleOption3)&&p.restorationModuleOptions.push(l(u.restorationModuleOption3)),i(u.restorationModuleOption4)&&p.restorationModuleOptions.push(l(u.restorationModuleOption4)),i(u.restorationModuleOption5)&&p.restorationModuleOptions.push(l(u.restorationModuleOption5)),i(u.restorationModuleOption6)&&p.restorationModuleOptions.push(l(u.restorationModuleOption6)),i(u.restorationModuleOption7)&&p.restorationModuleOptions.push(l(u.restorationModuleOption7)),i(u.restorationModuleOption8)&&p.restorationModuleOptions.push(l(u.restorationModuleOption8)),i(u.restorationModuleOption9)&&p.restorationModuleOptions.push(l(u.restorationModuleOption9))):p.restorationModuleOptions=void 0,u.slopeAnalysisRestorationOptions?(p.slopeAnalysisRestorationOptions=u.slopeAnalysisRestorationOptions.split(";"),void 0===p.restorationModuleOptions&&(p.restorationModuleOptions=[]),p.restorationModuleOptions.push({label:"slope analysis",id:"$3"})):p.slopeAnalysisRestorationOptions=void 0;var d=u.mapThemes&&u.mapThemes.split(",")||[],g=u.mapThemesAlternate&&u.mapThemesAlternate.split(",")||[],c=u.mapThemeIds&&u.mapThemeIds.split(",")||[],m=[],v=[];d.length===c.length&&d.length>0&&n.forEach(d,function(e,o){m.push({label:e,value:"http://wri.github.io/forest_atlas_template/?appid="+c[o].replace(" ","")})}),g.length===c.length&&g.length>0&&n.forEach(g,function(e,o){v.push({label:e,value:"http://wri.github.io/forest_atlas_template/?appid="+c[o].replace(" ","")})}),p.mapThemes=m,p.mapThemesAlternate=v,p.basemap=void 0,p.geometryServiceURL=void 0,p.defaultLayerTransparency=void 0}t.resolve(p)},function(){t.reject(new Error("Unable to retrieve application configuration imformation."))}),t):(t.reject(new Error("There is no application configuration imformation.")),t)}}});