define(["esri/urlUtils","dojo/Deferred","dojo/promise/all","esri/arcgis/utils","dojo/_base/array","res/Resources"],function(e,a,t,n,i,l){"use strict";return{getApplicationInformation:function(){var t=new a,r=e.urlToObject(location.href),o=r&&r.query&&r.query.appid;return o?(n.getItem(o).then(function(e){var a,n,r,o={},u=e.itemData&&e.itemData.values;if(u){o.country=u.country,o.appLanguages={},u.defaultLanguage||(u.defaultLanguage=l.defaultLanguage||"en"),o.defaultLanguage=u.defaultLanguage,n=l.appLanguages&&l.appLanguages[u.defaultLanguage],o.appLanguages[u.defaultLanguage]={title:u.defaultTitle||n&&n.title||"",flagTitle:u.flagTitle||n&&n.flagTitle||"","default":!0},o.useAdditionalLanguage=u.useAdditionalLanguage,o.useAdditionalLanguage&&(r=u.secondLanguage||"fr",a=l.appLanguages&&l.appLanguages[r],o.appLanguages[r]={title:u.secondLanguageTitle||a&&a.title||"",flagTitle:u.secondLanguageFlagTitle||a&&a.flagTitle||""}),o.layersToHide=u.layersToHide?u.layersToHide.split(",").map(function(e){return parseInt(e)}):[],o.maskMapUrl=u.maskMapUrl,o.webMapID=u.webmap,o.countryFlagRight=void 0!==u.countryFlagRight?u.countryFlagRight+"px":void 0,o.countryTextWidth=void 0!==u.countryTextWidth?u.countryTextWidth+"px":u.countryFlagRight?u.countryFlagRight-20+"px":void 0,o.flagPath=u.flagPath,o.flagLinkPath=u.flagLinkPath,o.pdfURL=u.pdfURL,o.aboutLinkUrl=u.aboutLinkUrl,o.downloadDataUrl=u.downloadDataUrl,o.printURL=u.printURL,o.activeFiresIncluded=void 0===u.activeFiresIncluded?!0:u.activeFiresIncluded,o.landCoverIncluded=void 0===u.landCoverIncluded?!0:u.landCoverIncluded,o.biomassIncluded=void 0===u.biomassIncluded?!0:u.biomassIncluded,o.iflIncluded=void 0===u.iflIncluded?!0:u.iflIncluded,o.excludeDocumentsTab=u.excludeDocumentsTab,o.documentDirectory=u.documentDirectory,o.documentMapserver=u.documentMapserver;var d=u.mapThemes&&u.mapThemes.split(",")||[],g=u.mapThemesAlternate&&u.mapThemesAlternate.split(",")||[],s=u.mapThemeIds&&u.mapThemeIds.split(",")||[],p=[],c=[];d.length===s.length&&d.length>0&&i.forEach(d,function(e,a){p.push({label:e,value:"http://wri.github.io/forest_atlas_template/?appid="+s[a].replace(" ","")})}),g.length===s.length&&g.length>0&&i.forEach(g,function(e,a){c.push({label:e,value:"http://wri.github.io/forest_atlas_template/?appid="+s[a].replace(" ","")})}),o.mapThemes=p,o.mapThemesAlternate=c,o.geometryServiceURL=void 0,o.basemap=void 0,o.defaultLayerTransparency=void 0}t.resolve(o)},function(){t.reject(new Error("Unable to retrieve application configuration imformation."))}),t):(t.reject(new Error("There is no application configuration imformation.")),t)}}});