define(["esri/urlUtils","dojo/Deferred","dojo/promise/all","esri/arcgis/utils","dojo/_base/array","res/Resources"],function(e,t,o,a,n,i){"use strict";var r=function(e){return""!==e&&void 0!==e&&2===e.split(",").length},l=function(e){var t=options.split(",");return{label:t[0],id:t[1].replace(/ /g,"")}};return{getApplicationInformation:function(){var o=new t,u=e.urlToObject(location.href),s=u&&u.query&&u.query.appid;return s?(a.getItem(s).then(function(e){var t,a,u,s={},d=e.itemData&&e.itemData.values;if(d){s.country=d.country,s.appLanguages={},d.defaultLanguage||(d.defaultLanguage=i.defaultLanguage||"en"),s.defaultLanguage=d.defaultLanguage,a=i.appLanguages&&i.appLanguages[d.defaultLanguage],s.appLanguages[d.defaultLanguage]={title:d.defaultTitle||a&&a.title||"",flagTitle:d.flagTitle||a&&a.flagTitle||"","default":!0},s.useAdditionalLanguage=d.useAdditionalLanguage,s.useAdditionalLanguage&&(u=d.secondLanguage||"fr",t=i.appLanguages&&i.appLanguages[u],s.appLanguages[u]={title:d.secondLanguageTitle||t&&t.title||"",flagTitle:d.secondLanguageFlagTitle||t&&t.flagTitle||""}),s.layersToHide=d.layersToHide?d.layersToHide.split(",").map(function(e){return parseInt(e)}):[],s.maskMapUrl=d.maskMapUrl,s.webMapID=d.webmap,s.countryFlagRight=void 0!==d.countryFlagRight?d.countryFlagRight+"px":void 0,s.countryTextWidth=void 0!==d.countryTextWidth?d.countryTextWidth+"px":d.countryFlagRight?d.countryFlagRight-20+"px":void 0,s.flagPath=d.flagPath,s.flagLinkPath=d.flagLinkPath,s.pdfURL=d.pdfURL,s.aboutLinkUrl=d.aboutLinkUrl,s.downloadDataUrl=d.downloadDataUrl,s.printURL=d.printURL,s.activeFiresIncluded=void 0===d.activeFiresIncluded?!0:d.activeFiresIncluded,s.landCoverIncluded=void 0===d.landCoverIncluded?!0:d.landCoverIncluded,s.biomassIncluded=void 0===d.biomassIncluded?!0:d.biomassIncluded,s.iflIncluded=void 0===d.iflIncluded?!0:d.iflIncluded,s.excludeDocumentsTab=d.excludeDocumentsTab,s.documentDirectory=d.documentDirectory,s.documentMapserver=d.documentMapserver,s.restorationModule=d.restorationModule||!1,s.restorationModuleOptions=[],r(d.restorationModuleOption1)&&s.restorationModuleOptions.push(l(d.restorationModuleOption1)),r(d.restorationModuleOption2)&&s.restorationModuleOptions.push(l(d.restorationModuleOption2)),r(d.restorationModuleOption3)&&s.restorationModuleOptions.push(l(d.restorationModuleOption3)),r(d.restorationModuleOption4)&&s.restorationModuleOptions.push(l(d.restorationModuleOption4)),r(d.restorationModuleOption5)&&s.restorationModuleOptions.push(l(d.restorationModuleOption5)),r(d.restorationModuleOption6)&&s.restorationModuleOptions.push(l(d.restorationModuleOption6)),r(d.restorationModuleOption7)&&s.restorationModuleOptions.push(l(d.restorationModuleOption7)),r(d.restorationModuleOption8)&&s.restorationModuleOptions.push(l(d.restorationModuleOption8)),r(d.restorationModuleOption9)&&s.restorationModuleOptions.push(l(d.restorationModuleOption9));var p=d.mapThemes&&d.mapThemes.split(",")||[],g=d.mapThemesAlternate&&d.mapThemesAlternate.split(",")||[],c=d.mapThemeIds&&d.mapThemeIds.split(",")||[],f=[],h=[];p.length===c.length&&p.length>0&&n.forEach(p,function(e,t){f.push({label:e,value:"http://wri.github.io/forest_atlas_template/?appid="+c[t].replace(" ","")})}),g.length===c.length&&g.length>0&&n.forEach(g,function(e,t){h.push({label:e,value:"http://wri.github.io/forest_atlas_template/?appid="+c[t].replace(" ","")})}),s.mapThemes=f,s.mapThemesAlternate=h,s.basemap=void 0,s.geometryServiceURL=void 0,s.defaultLayerTransparency=void 0}o.resolve(s)},function(){o.reject(new Error("Unable to retrieve application configuration imformation."))}),o):(o.reject(new Error("There is no application configuration imformation.")),o)}}});