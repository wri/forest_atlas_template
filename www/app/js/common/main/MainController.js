define(["declare","mainmodel","mainconfig","registry","topic","hash","all","string","class","on","featureLayer","querytask","query","dom","root/languages","ioquery","mapconfig"],function(e,a,s,t,r,n,i,o,l,y,c,u,L,p,d,g,b){var T="",f="";return e(null,{changeTitle:function(e){var a,s=app.config.appLanguages[e];a=s.title?s.title:"",window.document.title=a},UIcreationComplete:function(e,s){T=e,f=s,this.changeTitle(s),a.initialize("headerView",T,f)},changeLanguage:function(e){this.changeTitle(e);var s=e,r=d[s],i=a.getVM(),o=i.currentLanguage(),l=n(),y=g.queryToObject(l);y.l=s,n(g.objectToQuery(y));var c=app.config.appLanguages[s].title,u=app.config.appLanguages[s].flagTitle;i.title(c),i.flagTitle(u),i.currentLanguage(s),require(["toolsmodel","mapui","mapmodel","array","mapcontroller"],function(e,a,n,l,y){var c=n.getVM(),u=(c.mapPoint(),a.getMap()),g=(u.infoWindow,b.getConfig());switch(T){case"atlas":var f=e.getVM();switch(f.tabBasemapTitle(r.tabBasemapTitle),f.tabLegendTitle(r.tabLegendTitle),f.printDialog(r.printDialog),f.tabLayersTitle(r.tabLayersTitle),f.buttonLayersText(r.buttonLayersText),f.about(r.about),f.downloadData(r.downloadData),f.sources(r.sources),f.print(r.print),f.mapThemesLabel(r.mapThemesLabel),f.legislativeText(r.legislativeText),f.printReport(r.printReport),f.zoom(r.zoom),f.closeButtonText(r.closeButtonText),f.popupDataTab(r.popupDataTab),f.popupAnalysisTab(r.popupAnalysisTab),f.documentsUnavailable(r.documentsUnavailable),f.documentType(r.documentType),f.documentAuthor(r.documentAuthor),f.documentDate(r.documentDate),f.documentLink(r.documentLink),f.analysisLoss(r.analysisLoss),f.analysisGain(r.analysisGain),f.analysisLC(r.analysisLC),f.analysisIFL(r.analysisIFL),f.analysisCS(r.analysisCS),f.analysisFire(r.analysisFire),f.analysisLCComposition(r.analysisLCComposition),f.analysisOptions(r.analysisOptions),f.firesOneWeek(r.firesOneWeek),f.fires72Hours(r.fires72Hours),f.fires48Hours(r.fires48Hours),f.fires24Hours(r.fires24Hours),f.lossStartingYear(r.lossStartingYear),f.lossEndingYear(r.lossEndingYear),f.accordionForestCoverTitle(r.accordionForestCoverTitle),f.accordionForestLossTitle(r.accordionForestLossTitle),f.accordionLandUseTitle(r.accordionLandUseTitle),f.forestCoverLossLabel(r.forestCoverLossLabel),f.activeFiresLabel(r.activeFiresLabel),f.treeCoverDensityLabel(r.treeCoverDensityLabel),f.landCoverLabel(r.landCoverLabel),f.treeCoverGainLabel(r.treeCoverGainLabel),f.carbonLayerLabel(r.carbonLayerLabel),f.intactForestLayerLabel(r.intactForestLayerLabel),f.treeCoverAnalysis(r.treeCoverAnalysis),f.otherAnalysisTypes(r.otherAnalysisTypes),f.selectAll(r.selectAll),f.clearAll(r.clearAll),f.transparency(r.transparency),f.basemapTitles(r.basemapTitles),f.drawButtonText(r.drawButtonText),f.uploadButtonText(r.uploadButtonText),f.uploadInstructions(r.uploadInstructions),f.clearAllFeatures(r.clearAllFeatures),f.deleteCustomFeature(r.deleteCustomFeature),f.landsatTextLabel(r.landsatTextLabel),f.tcdSelectorBegin(r.tcdSelectorBegin),f.tcdSelectorEnd(r.tcdSelectorEnd),f.treeCoverSliderLabel(r.treeCoverSliderLabel),f.currentAnalysisType()){case d[o].analysisLoss:f.currentAnalysisType(r.analysisLoss);break;case d[o].analysisGain:f.currentAnalysisType(r.analysisGain);break;case d[o].analysisLC:f.currentAnalysisType(r.analysisLC);break;case d[o].analysisIFL:f.currentAnalysisType(r.analysisIFL);break;case d[o].analysisCS:f.currentAnalysisType(r.analysisCS);break;case d[o].analysisFire:f.currentAnalysisType(r.analysisFire);break;case d[o].analysisLCComposition:f.currentAnalysisType(r.analysisLCComposition);break;default:f.currentAnalysisType(r.analysisLoss)}var m=s.toLowerCase(),v="";"en"===m?f.mapThemes(app.config.mapThemes):f.mapThemes(app.config.mapThemesAlternate),l.some(u.layerIds,function(e){return layerIdlowerCase=e.toLowerCase(),v=e,layerIdlowerCase.indexOf("_"+m)>-1});i.printLayouts();c.currentActiveLayer(u.getLayer(v)),l.forEach(u.getLayer(v).layerInfos,function(e,a){var s="sliderTitleDiv"+a;p.byId(s).innerHTML=e.name});var h=[];h=L(".language"),l.forEach(h,function(e,a){var t=e.value;t==s?(e.style.color="white",e.style.fontWeight="bold"):(e.style.color="black",e.style.fontWeight="normal")}),l.forEach(u.layerIds,function(e){if(e==v){var a=u.getLayer(e).visibleLayers;u.getLayer(e).show(),u.getLayer(e).setVisibleLayers(a)}else e!=v&&e!=u.layerIds[0]&&(l.forEach(u.getLayer(e).layerInfos,function(a,s){var t=s+1,r=e+"_"+t,n=u._layers[r];n&&n.hide()}),-1===l.indexOf(g.extraLayerKeys,e)&&u.getLayer(e).hide())});var C=u.getLayer(v).createDynamicLayerInfosFromLayerInfos(),A=u.getLayer(v).visibleLayers;l.forEach(C,function(e,a){var s=a+1,t=v+"_"+s,r=u._layers[t];r&&(l.indexOf(A,s)>-1?r.show():(console.log(r.id),r.hide()))}),t.byId("legendDiv").refresh([{layer:c.currentActiveLayer(),title:""}]),u.getLayer("maskLayer").show(),c.currentActiveLayer(u.getLayer(v)),u.infoWindow.hide();var F,w,I;l.forEach(g.extraLayerKeys,function(e){F=g[e],F.hasLanguageSupport&&(I=u.getLayer(F.id),w="en"===s?0:"fr"===s?1:2,I.setVisibleLayers([w]),console.dir(I))});break;case"other":}})}})});