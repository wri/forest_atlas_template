extends jade/layout.jade

block append styles
  link(rel='stylesheet', href='css/report.css?#{version}')
  link(rel='stylesheet', href='http://js.arcgis.com/#{esriVersion}/esri/css/esri.css')
    
block append esri-script
  script.
    var base = location.href.replace(/\/[^/]+$/, '');
    var dojoConfig = {
      parseOnLoad: false,
      async: true,
      cacheBust: '#{version}',
      packages: [
        { name: 'js', location: base + 'js' },
        { name: 'vendor', location: base + 'vendor' },
        { name: 'utils', location: base + 'js/utils' },
        { name: 'stores', location: base + 'js/stores' },
        { name: 'actions', location: base + 'js/actions' },
        { name: 'constants', location: base + 'js/constants' },
        { name: 'components', location: base + 'js/components' },
        { name: 'helpers', location: base + 'js/helpers' }
      ],
      aliases: [
        ['resources', 'js/resources'],
        //- ['alt', 'vendor/alt/dist/alt.min'],
        //- ['react', 'vendor/react/react.min'],
        //- ['react-dom', 'vendor/react/react-dom.min'],
        ['babel-polyfill', 'vendor/babel-polyfill/browser-polyfill']
      ],
      deps: ['dojo/domReady!'],
      callback: function () {require(['js/reportMain']);}
    };
  script(src='http://js.arcgis.com/#{esriVersion}/init.js', async)
